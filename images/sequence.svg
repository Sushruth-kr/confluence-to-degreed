<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="902px" preserveAspectRatio="none" style="width:3342px;height:902px;" version="1.1" viewBox="0 0 3342 902" width="3342px" zoomAndPan="magnify"><defs><filter height="300%" id="f14g5z18rsdsqf" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f14g5z18rsdsqf)" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="1427.5" x="588" y="142.6953"/><rect fill="#FFFFFF" filter="url(#f14g5z18rsdsqf)" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="2345.5" x="588" y="494.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="80" x2="80" y1="38.2969" y2="861.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="722" x2="722" y1="38.2969" y2="861.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1219" x2="1219" y1="38.2969" y2="861.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1387" x2="1387" y1="38.2969" y2="861.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1743.5" x2="1743.5" y1="38.2969" y2="861.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1858.5" x2="1858.5" y1="38.2969" y2="861.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1959.5" x2="1959.5" y1="38.2969" y2="861.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2223.5" x2="2223.5" y1="38.2969" y2="861.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2532.5" x2="2532.5" y1="38.2969" y2="861.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2660.5" x2="2660.5" y1="38.2969" y2="861.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2830.5" x2="2830.5" y1="38.2969" y2="861.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3025.5" x2="3025.5" y1="38.2969" y2="861.8828"/><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="15" y="22.9951">CloudWatch Event</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="8" y="860.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="15" y="880.8779">CloudWatch Event</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="244" x="598" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="230" x="605" y="22.9951">Confluence-to-Wiki Step Function</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="244" x="598" y="860.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="230" x="605" y="880.8779">Confluence-to-Wiki Step Function</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="1146" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="1153" y="22.9951">listSpaces Lambda</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="1146" y="860.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="1153" y="880.8779">listSpaces Lambda</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="167" x="1302" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="153" x="1309" y="22.9951">spaceHandler Lambda</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="167" x="1302" y="860.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="153" x="1309" y="880.8779">spaceHandler Lambda</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="1682.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1689.5" y="22.9951">Confluence API</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="1682.5" y="860.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="1689.5" y="880.8779">Confluence API</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="1814.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="1821.5" y="22.9951">S3 Bucket</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="1814.5" y="860.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="1821.5" y="880.8779">S3 Bucket</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="1913.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="1920.5" y="22.9951">Athena DB</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="1913.5" y="860.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="1920.5" y="880.8779">Athena DB</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="184" x="2129.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="170" x="2136.5" y="22.9951">degreedHandler Lambda</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="184" x="2129.5" y="860.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="170" x="2136.5" y="880.8779">degreedHandler Lambda</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="2480.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="2487.5" y="22.9951">Degreed API</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="100" x="2480.5" y="860.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="2487.5" y="880.8779">Degreed API</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="2594.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="2601.5" y="22.9951">allPages Lambda</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="2594.5" y="860.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="2601.5" y="880.8779">allPages Lambda</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="182" x="2737.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="168" x="2744.5" y="22.9951">allPagesHandler Lambda</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="182" x="2737.5" y="860.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="168" x="2744.5" y="880.8779">allPagesHandler Lambda</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="2933.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="2940.5" y="22.9951">processResults Lambda</text><rect fill="#FEFECE" filter="url(#f14g5z18rsdsqf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="2933.5" y="860.8828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="166" x="2940.5" y="880.8779">processResults Lambda</text><polygon fill="#A80036" points="710,65.4297,720,69.4297,710,73.4297,714,69.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80" x2="716" y1="69.4297" y2="69.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="87" y="64.3638">[010]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="575" x="130" y="64.3638">Periodic (expecting daily, but periodicity is adjustable) event kicks off content load function</text><polygon fill="#A80036" points="1207,94.5625,1217,98.5625,1207,102.5625,1211,98.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="722" x2="1213" y1="98.5625" y2="98.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="729" y="93.4966">[020]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="772" y="93.4966">execute "Spaces" Workflow</text><polygon fill="#A80036" points="733,123.6953,723,127.6953,733,131.6953,729,127.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="727" x2="1218" y1="127.6953" y2="127.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="739" y="122.6294">[030]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="430" x="782" y="122.6294">"Return list of spaces from either config param or dynamoDB table"</text><path d="M588,142.6953 L665,142.6953 L665,149.6953 L655,159.6953 L588,159.6953 L588,142.6953 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="1427.5" x="588" y="142.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="603" y="155.7622">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="680" y="154.9058">["for every space key"]</text><polygon fill="#A80036" points="1375.5,176.9609,1385.5,180.9609,1375.5,184.9609,1379.5,180.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="722" x2="1381.5" y1="180.9609" y2="180.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="729" y="175.895">[040]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="772" y="175.895">run spaceHandler for space key</text><polygon fill="#A80036" points="1731.5,206.0938,1741.5,210.0938,1731.5,214.0938,1735.5,210.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1387.5" x2="1737.5" y1="210.0938" y2="210.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="1394.5" y="205.0278">[050]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="289" x="1437.5" y="205.0278">pull all pages (link and metadata) from space</text><polygon fill="#A80036" points="1847,235.2266,1857,239.2266,1847,243.2266,1851,239.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1387.5" x2="1853" y1="239.2266" y2="239.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="1394.5" y="234.1606">[060]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="352" x="1437.5" y="234.1606">upload space results as CSV (spaces/&lt;spacekey&gt;.csv)</text><polygon fill="#A80036" points="1947.5,264.3594,1957.5,268.3594,1947.5,272.3594,1951.5,268.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1387.5" x2="1953.5" y1="268.3594" y2="268.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="1394.5" y="263.2935">[070]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="1437.5" y="263.2935">create "wiki_spaces" table</text><polygon fill="#A80036" points="2211.5,300.4922,2221.5,304.4922,2211.5,308.4922,2215.5,304.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="722" x2="2217.5" y1="304.4922" y2="304.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="729" y="299.4263">[080]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="772" y="299.4263">Execute Degreed Workflow</text><polygon fill="#A80036" points="2520.5,329.625,2530.5,333.625,2520.5,337.625,2524.5,333.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2223.5" x2="2526.5" y1="333.625" y2="333.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="2230.5" y="328.5591">[090]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="2273.5" y="328.5591">Read all wiki pages in degreed catalog</text><polygon fill="#A80036" points="1870,358.7578,1860,362.7578,1870,366.7578,1866,362.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1864" x2="2222.5" y1="362.7578" y2="362.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="1876" y="357.6919">[100]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="282" x="1919" y="357.6919">upload results as CSV (degreed/articles.csv)</text><polygon fill="#A80036" points="1970.5,387.8906,1960.5,391.8906,1970.5,395.8906,1966.5,391.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1964.5" x2="2222.5" y1="391.8906" y2="391.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="1976.5" y="386.8247">[110]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="2019.5" y="386.8247">create "degreed_articles" table</text><polygon fill="#A80036" points="2649,417.0234,2659,421.0234,2649,425.0234,2653,421.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="722" x2="2655" y1="421.0234" y2="421.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="729" y="415.9575">[120]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="772" y="415.9575">Execute AllPages Workflow</text><polygon fill="#A80036" points="1754.5,446.1563,1744.5,450.1563,1754.5,454.1563,1750.5,450.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1748.5" x2="2660" y1="450.1563" y2="450.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="1760.5" y="445.0903">[130]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="1803.5" y="445.0903">Get total count of pages in the wiki</text><polygon fill="#A80036" points="733,475.2891,723,479.2891,733,483.2891,729,479.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="727" x2="2660" y1="479.2891" y2="479.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="739" y="474.2231">[140]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="472" x="782" y="474.2231">split the total count by "wiki/item_limit" and return a list of "start" numbers</text><path d="M588,494.2891 L665,494.2891 L665,501.2891 L655,511.2891 L588,511.2891 L588,494.2891 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="133.6641" style="stroke: #000000; stroke-width: 2.0;" width="2345.5" x="588" y="494.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="603" y="507.356">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="680" y="506.4995">["for each startnumber"]</text><polygon fill="#A80036" points="2818.5,528.5547,2828.5,532.5547,2818.5,536.5547,2822.5,532.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="722" x2="2824.5" y1="532.5547" y2="532.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="729" y="527.4888">[150]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="772" y="527.4888">run allPagesHandler</text><polygon fill="#A80036" points="1754.5,557.6875,1744.5,561.6875,1754.5,565.6875,1750.5,561.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1748.5" x2="2829.5" y1="561.6875" y2="561.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="1760.5" y="556.6216">[160]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="664" x="1803.5" y="556.6216">retrieve &lt;wiki/item_limit&gt; wiki pages (no expansion, really just need URL and ID), starting with #&lt;start&gt;</text><polygon fill="#A80036" points="1870,586.8203,1860,590.8203,1870,594.8203,1866,590.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1864" x2="2829.5" y1="590.8203" y2="590.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="1876" y="585.7544">[170]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="338" x="1919" y="585.7544">upload results as CSV (allpages/&lt;startnumber&gt;.csv)</text><polygon fill="#A80036" points="1970.5,615.9531,1960.5,619.9531,1970.5,623.9531,1966.5,619.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1964.5" x2="2829.5" y1="619.9531" y2="619.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="1976.5" y="614.8872">[180]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="2019.5" y="614.8872">create "page_inventory" table</text><polygon fill="#A80036" points="3013.5,652.0859,3023.5,656.0859,3013.5,660.0859,3017.5,656.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="722" x2="3019.5" y1="656.0859" y2="656.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="729" y="651.02">[190]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="772" y="651.02">execute content upload workflow</text><polygon fill="#A80036" points="1970.5,681.2188,1960.5,685.2188,1970.5,689.2188,1966.5,685.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1964.5" x2="3024.5" y1="685.2188" y2="685.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="1976.5" y="680.1528">[200]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="2019.5" y="680.1528">select degreed_articles that do</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="2221.5" y="680.1528">not</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="470" x="2249.5" y="680.1528">have a match in page_inventory, to create a list of "to be deleted" articles</text><polygon fill="#A80036" points="1970.5,710.3516,1960.5,714.3516,1970.5,718.3516,1966.5,714.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1964.5" x2="3024.5" y1="714.3516" y2="714.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="1976.5" y="709.2856">[210]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="608" x="2019.5" y="709.2856">select degreed_articles that do have a match in wiki_spaces, to create a list of "update" articles</text><polygon fill="#A80036" points="1970.5,739.4844,1960.5,743.4844,1970.5,747.4844,1966.5,743.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1964.5" x2="3024.5" y1="743.4844" y2="743.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="1976.5" y="738.4185">[220]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="567" x="2019.5" y="738.4185">select wiki_spaces pages that do not show up in degreed, to create a list of "new" articles</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="3025.5" x2="3067.5" y1="772.6172" y2="772.6172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3067.5" x2="3067.5" y1="772.6172" y2="785.6172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3026.5" x2="3067.5" y1="785.6172" y2="785.6172"/><polygon fill="#A80036" points="3036.5,781.6172,3026.5,785.6172,3036.5,789.6172,3032.5,785.6172" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="3032.5" y="767.5513">[230]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="3075.5" y="767.5513">merge lists to create content upload file</text><polygon fill="#A80036" points="2543.5,810.75,2533.5,814.75,2543.5,818.75,2539.5,814.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2537.5" x2="3024.5" y1="814.75" y2="814.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="2549.5" y="809.6841">[240]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="2592.5" y="809.6841">upload content upload file</text><polygon fill="#A80036" points="733,839.8828,723,843.8828,733,847.8828,729,843.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="727" x2="3024.5" y1="843.8828" y2="843.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="739" y="838.8169">[250]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="782" y="838.8169">Success!</text><!--
@startuml
autonumber 10 10 "<b>[000]"

"CloudWatch Event" as cwe -> "Confluence-to-Wiki Step Function" as step: Periodic (expecting daily, but periodicity is adjustable) event kicks off content load function
step -> "listSpaces Lambda" as ls_lwf: execute "Spaces" Workflow
ls_lwf -> step: "Return list of spaces from either config param or dynamoDB table"
loop "for every space key"
  step -> "spaceHandler Lambda" as sh_lwf: run spaceHandler for space key
  sh_lwf -> "Confluence API" as confapi: pull all pages (link and metadata) from space
  sh_lwf -> "S3 Bucket" as s3bucket: upload space results as CSV (spaces/<spacekey>.csv)
  sh_lwf -> "Athena DB" as athena: create "wiki_spaces" table
end

step -> "degreedHandler Lambda" as degreed_lwf: Execute Degreed Workflow
degreed_lwf -> "Degreed API" as degreedapi: Read all wiki pages in degreed catalog
degreed_lwf -> s3bucket: upload results as CSV (degreed/articles.csv)
degreed_lwf -> athena: create "degreed_articles" table

step -> "allPages Lambda" as allpages_lwf: Execute AllPages Workflow
allpages_lwf -> confapi: Get total count of pages in the wiki
allpages_lwf -> step: split the total count by "wiki/item_limit" and return a list of "start" numbers
loop "for each startnumber"
  step-> "allPagesHandler Lambda" as allpages_handler_lwf: run allPagesHandler 
  allpages_handler_lwf->confapi: retrieve <wiki/item_limit> wiki pages (no expansion, really just need URL and ID), starting with #<start>
  allpages_handler_lwf-> s3bucket: upload results as CSV (allpages/<startnumber>.csv)
  allpages_handler_lwf -> athena: create "page_inventory" table
end

step -> "processResults Lambda" as content_lwf: execute content upload workflow
content_lwf->athena: select degreed_articles that do **not** have a match in page_inventory, to create a list of "to be deleted" articles
content_lwf->athena: select degreed_articles that do have a match in wiki_spaces, to create a list of "update" articles
content_lwf->athena: select wiki_spaces pages that do not show up in degreed, to create a list of "new" articles
content_lwf->content_lwf: merge lists to create content upload file
content_lwf->degreedapi: upload content upload file
content_lwf->step: Success!
@enduml

PlantUML version 1.2019.06(Fri May 24 17:10:25 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-b04
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>